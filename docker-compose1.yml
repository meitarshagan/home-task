version: '3'
services:
  node1:
    image: webz-001
    container_name: webz-001
    environment:
      - NODE_ID=1
      - NODE_ADDR=webz-001
      - PEER_NODES=webz-002,webz-003
    ports:
      - "8081:80"  
    networks:
      - cluster_network

  node2:
    image: webz-001
    container_name: webz-002
    environment:
      - NODE_ID=2
      - NODE_ADDR=webz-002
      - PEER_NODES=webz-001,webz-003
    ports:
      - "8082:80"  
    networks:
      - cluster_network

  node3:
    image: webz-001
    container_name: webz-003
    environment:
      - NODE_ID=3
      - NODE_ADDR=webz-003
      - PEER_NODES=webz-001,webz-002
    ports:
      - "8083:80"  
    networks:
      - cluster_network

networks:
  cluster_network:
    driver: bridge
